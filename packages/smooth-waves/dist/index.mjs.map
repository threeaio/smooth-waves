{"version":3,"sources":["../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/use-constant.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/context/MotionConfigContext.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/is-browser.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-utils/dist/es/noop.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-utils/dist/es/errors.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/GlobalConfig.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/frameloop/order.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/frameloop/render-step.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/frameloop/batcher.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/frameloop/frame.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/warn-once.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/clamp.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/numbers/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/numbers/units.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/frameloop/sync-time.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/array.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/subscription-manager.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/velocity-per-second.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-utils/dist/es/memo.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-dom/dist/es/utils/supports/scroll-timeline.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-utils/dist/es/progress.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/sanitize.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/float-regex.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/is-nullish.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/single-color-regex.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/utils.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/rgba.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/hex.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/hsla.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/color-regex.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/types/complex/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/number.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/immediate.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/color.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/pipe.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/visibility.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/complex.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/interpolate.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/offsets/fill.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/offsets/default.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/motion-dom/dist/es/utils/resolve-elements.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/observe.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/resize/handle-element.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/resize/handle-window.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/resize/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/info.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/offsets/inset.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/offsets/edge.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/offsets/offset.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/offsets/presets.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/offsets/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/on-scroll-handler.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/track.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/render/dom/scroll/index.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/value/use-scroll.mjs","../../../node_modules/.pnpm/motion@12.4.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/motion/dist/es/framer-motion/dist/es/utils/use-animation-frame.mjs","../src/wave.tsx"],"names":["useConstant","init","ref","useRef","MotionConfigContext","createContext","p","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","noop","any","warning","invariant","check","message","MotionGlobalConfig","stepsOrder","createRenderStep","runNextFrame","stepName","thisFrame","nextFrame","isProcessing","flushNextFrame","toKeepAlive","latestFrameData","triggerCallback","callback","step","keepAlive","immediate","queue","frameData","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","useDefaultElapsed","state","flagRunNextFrame","steps","acc","key","read","resolveKeyframes","update","preRender","render","postRender","processBatch","timestamp","wake","process","i","frame","cancelFrame","warned","warnOnce","condition","element","checkStringStartsWith","token","startsAsVariableToken","isCSSVariableToken","value","singleCssVariableRegex","clamp","min","max","v","number","alpha","__spreadProps","__spreadValues","createUnitType","unit","percent","now","clearTime","time","newTime","addUniqueItem","arr","item","removeItem","index","SubscriptionManager","handler","a","b","c","numSubscriptions","velocityPerSecond","velocity","frameDuration","MAX_VELOCITY_DELTA","isFloat","MotionValue","options","currentTime","current","prevFrameValue","subscription","eventName","unsubscribe","eventManagers","passiveEffect","stopPassiveEffect","prev","delta","endAnimation","startAnimation","resolve","motionValue","memo","result","supportsScrollTimeline","progress","from","to","toFromDifference","sanitize","floatRegex","isNullish","singleColorRegex","isColorString","type","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","parseHex","r","g","hex","hsla","hue","saturation","lightness","color","colorRegex","test","_a","_b","NUMBER_TOKEN","COLOR_TOKEN","VAR_TOKEN","VAR_FUNCTION_TOKEN","SPLIT_TOKEN","complexRegex","analyseComplexValue","originalValue","values","indexes","types","split","parsedValue","parseComplexValue","createTransformer","source","numSections","output","convertNumbersToZero","getAnimatableNone","parsed","complex","mixNumber","hueToRgb","q","t","hslaToRgba","mixImmediate","mixLinearColor","fromExpo","expo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","combineFunctions","pipe","transformers","invisibleValues","mixVisibility","origin","target","getMixer","mixComplex","mixArray","mixObject","numValues","blendValue","matchOrder","orderedOrigin","pointers","originIndex","originValue","template","originStats","targetStats","mix","createMixers","ease","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","isZeroDeltaRange","interpolator","progressInRange","fillOffset","offset","remaining","offsetProgress","defaultOffset","resolveElements","elementOrSelector","scope","selectorCache","root","elements","observeTimeline","timeline","prevProgress","onFrame","resizeHandlers","observer","getElementSize","borderBoxSize","inlineSize","blockSize","notifyTarget","contentRect","notifyAll","entries","createResizeObserver","resizeElement","elementHandlers","windowCallbacks","windowResizeHandler","createWindowResizeHandler","size","info","resizeWindow","resize","createAxisInfo","createScrollInfo","keys","updateAxisInfo","axisName","axis","length","position","prevTime","elapsed","updateScrollInfo","calcInset","container","inset","svgBoundingBox","parentBoundingBox","x","y","svg","parent","namedEdges","resolveEdge","edge","asNumber","resolveOffset","containerLength","targetLength","targetInset","offsetDefinition","targetPoint","containerPoint","ScrollOffset","point","getTargetSize","resolveOffsets","lengthLabel","targetSize","containerSize","hasChanged","numOffsets","measure","node","createOnScrollHandler","onScroll","scrollListeners","resizeListeners","onScrollHandlers","getEventTarget","scrollInfo","__objRest","containerHandlers","containerHandler","measureAll","updateAll","listener","currentHandlers","scrollListener","scrollTimelineFallback","cancel","timelineCache","getTimeline","elementCache","isOnScrollWithInfo","needsElementTracking","scrollFunction","scrollAnimation","animation","valueAnimation","scroll","optionsWithDefaults","refWarning","name","createScrollMotionValues","useScroll","layoutEffect","_progress","useAnimationFrame","initialTimestamp","isStatic","useContext","provideTimeSinceStart","defaultCurveConfig","lerpBezier","start","end","lerp","lerpBeziers","drawWavePath","ctx","config","curveIntensity","curveAmount","offsetLeft","offsetRight","width","height","Wave","curveConfig","containerRef","canvasRef","overlayCanvasRef","scrollYProgress","dpr","setDpr","useState","currentConfig","setCurrentConfig","transitionTimeRef","TRANSITION_DURATION","lastScrollRef","handleResize","canvas","overlayCanvas","drawWave","fillStyle","_c","_d","sp","configCount","targetConfig","segmentSize","segmentIndex","segmentProgress","remap","startConfig","endConfig","easedProgress","lerpedConfig","jsxs","jsx"],"mappings":"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","file":"index.mjs","sourcesContent":["import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","\"use client\";\nimport { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","const isBrowser = typeof window !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","/*#__NO_SIDE_EFFECTS__*/\nconst noop = (any) => any;\n\nexport { noop };\n","import { noop } from './noop.mjs';\n\nlet warning = noop;\nlet invariant = noop;\nif (process.env.NODE_ENV !== \"production\") {\n    warning = (check, message) => {\n        if (!check && typeof console !== \"undefined\") {\n            console.warn(message);\n        }\n    };\n    invariant = (check, message) => {\n        if (!check) {\n            throw new Error(message);\n        }\n    };\n}\n\nexport { invariant, warning };\n","const MotionGlobalConfig = {\n    skipAnimations: false,\n    useManualTiming: false,\n};\n\nexport { MotionGlobalConfig };\n","const stepsOrder = [\n    \"read\", // Read\n    \"resolveKeyframes\", // Write/Read/Write/Read\n    \"update\", // Compute\n    \"preRender\", // Compute\n    \"render\", // Write\n    \"postRender\", // Compute\n];\n\nexport { stepsOrder };\n","import { statsBuffer } from '../stats/buffer.mjs';\n\nfunction createRenderStep(runNextFrame, stepName) {\n    /**\n     * We create and reuse two queues, one to queue jobs for the current frame\n     * and one for the next. We reuse to avoid triggering GC after x frames.\n     */\n    let thisFrame = new Set();\n    let nextFrame = new Set();\n    /**\n     * Track whether we're currently processing jobs in this step. This way\n     * we can decide whether to schedule new jobs for this frame or next.\n     */\n    let isProcessing = false;\n    let flushNextFrame = false;\n    /**\n     * A set of processes which were marked keepAlive when scheduled.\n     */\n    const toKeepAlive = new WeakSet();\n    let latestFrameData = {\n        delta: 0.0,\n        timestamp: 0.0,\n        isProcessing: false,\n    };\n    let numCalls = 0;\n    function triggerCallback(callback) {\n        if (toKeepAlive.has(callback)) {\n            step.schedule(callback);\n            runNextFrame();\n        }\n        numCalls++;\n        callback(latestFrameData);\n    }\n    const step = {\n        /**\n         * Schedule a process to run on the next frame.\n         */\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (!queue.has(callback))\n                queue.add(callback);\n            return callback;\n        },\n        /**\n         * Cancel the provided callback from running on the next frame.\n         */\n        cancel: (callback) => {\n            nextFrame.delete(callback);\n            toKeepAlive.delete(callback);\n        },\n        /**\n         * Execute all schedule callbacks.\n         */\n        process: (frameData) => {\n            latestFrameData = frameData;\n            /**\n             * If we're already processing we've probably been triggered by a flushSync\n             * inside an existing process. Instead of executing, mark flushNextFrame\n             * as true and ensure we flush the following frame at the end of this one.\n             */\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\n            // Execute this frame\n            thisFrame.forEach(triggerCallback);\n            /**\n             * If we're recording stats then\n             */\n            if (stepName && statsBuffer.value) {\n                statsBuffer.value.frameloop[stepName].push(numCalls);\n            }\n            numCalls = 0;\n            // Clear the frame so no callbacks remain. This is to avoid\n            // memory leaks should this render step not run for a while.\n            thisFrame.clear();\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { stepsOrder } from './order.mjs';\nimport { createRenderStep } from './render-step.mjs';\n\nconst maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n    let runNextFrame = false;\n    let useDefaultElapsed = true;\n    const state = {\n        delta: 0.0,\n        timestamp: 0.0,\n        isProcessing: false,\n    };\n    const flagRunNextFrame = () => (runNextFrame = true);\n    const steps = stepsOrder.reduce((acc, key) => {\n        acc[key] = createRenderStep(flagRunNextFrame, allowKeepAlive ? key : undefined);\n        return acc;\n    }, {});\n    const { read, resolveKeyframes, update, preRender, render, postRender } = steps;\n    const processBatch = () => {\n        const timestamp = MotionGlobalConfig.useManualTiming\n            ? state.timestamp\n            : performance.now();\n        runNextFrame = false;\n        if (!MotionGlobalConfig.useManualTiming) {\n            state.delta = useDefaultElapsed\n                ? 1000 / 60\n                : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n        }\n        state.timestamp = timestamp;\n        state.isProcessing = true;\n        // Unrolled render loop for better per-frame performance\n        read.process(state);\n        resolveKeyframes.process(state);\n        update.process(state);\n        preRender.process(state);\n        render.process(state);\n        postRender.process(state);\n        state.isProcessing = false;\n        if (runNextFrame && allowKeepAlive) {\n            useDefaultElapsed = false;\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const wake = () => {\n        runNextFrame = true;\n        useDefaultElapsed = true;\n        if (!state.isProcessing) {\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const schedule = stepsOrder.reduce((acc, key) => {\n        const step = steps[key];\n        acc[key] = (process, keepAlive = false, immediate = false) => {\n            if (!runNextFrame)\n                wake();\n            return step.schedule(process, keepAlive, immediate);\n        };\n        return acc;\n    }, {});\n    const cancel = (process) => {\n        for (let i = 0; i < stepsOrder.length; i++) {\n            steps[stepsOrder[i]].cancel(process);\n        }\n    };\n    return { schedule, cancel, state, steps };\n}\n\nexport { createRenderBatcher };\n","import '../../../../motion-utils/dist/es/errors.mjs';\nimport { noop } from '../../../../motion-utils/dist/es/noop.mjs';\nimport { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps: frameSteps, } = createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\n\nexport { cancelFrame, frame, frameData, frameSteps };\n","const warned = new Set();\nfunction warnOnce(condition, message, element) {\n    if (condition || warned.has(message))\n        return;\n    console.warn(message);\n    if (element)\n        console.warn(element);\n    warned.add(message);\n}\n\nexport { warnOnce };\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\nconst isCSSVariableName = \n/*@__PURE__*/ checkStringStartsWith(\"--\");\nconst startsAsVariableToken = \n/*@__PURE__*/ checkStringStartsWith(\"var(--\");\nconst isCSSVariableToken = (value) => {\n    const startsWithToken = startsAsVariableToken(value);\n    if (!startsWithToken)\n        return false;\n    // Ensure any comments are stripped from the value as this can harm performance of the regex.\n    return singleCssVariableRegex.test(value.split(\"/*\")[0].trim());\n};\nconst singleCssVariableRegex = /var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$/iu;\n\nexport { isCSSVariableName, isCSSVariableToken };\n","const clamp = (min, max, v) => {\n    if (v > max)\n        return max;\n    if (v < min)\n        return min;\n    return v;\n};\n\nexport { clamp };\n","import { clamp } from '../../../utils/clamp.mjs';\n\nconst number = {\n    test: (v) => typeof v === \"number\",\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = {\n    ...number,\n    transform: (v) => clamp(0, 1, v),\n};\nconst scale = {\n    ...number,\n    default: 1,\n};\n\nexport { alpha, number, scale };\n","const createUnitType = (unit) => ({\n    test: (v) => typeof v === \"string\" && v.endsWith(unit) && v.split(\" \").length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = /*@__PURE__*/ createUnitType(\"deg\");\nconst percent = /*@__PURE__*/ createUnitType(\"%\");\nconst px = /*@__PURE__*/ createUnitType(\"px\");\nconst vh = /*@__PURE__*/ createUnitType(\"vh\");\nconst vw = /*@__PURE__*/ createUnitType(\"vw\");\nconst progressPercentage = {\n    ...percent,\n    parse: (v) => percent.parse(v) / 100,\n    transform: (v) => percent.transform(v * 100),\n};\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { frameData } from './frame.mjs';\n\nlet now;\nfunction clearTime() {\n    now = undefined;\n}\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\nconst time = {\n    now: () => {\n        if (now === undefined) {\n            time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming\n                ? frameData.timestamp\n                : performance.now());\n        }\n        return now;\n    },\n    set: (newTime) => {\n        now = newTime;\n        queueMicrotask(clearTime);\n    },\n};\n\nexport { time };\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { time } from '../frameloop/sync-time.mjs';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\n/**\n * Maximum time between the value of two frames, beyond which we\n * assume the velocity has since been 0.\n */\nconst MAX_VELOCITY_DELTA = 30;\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\nconst collectMotionValues = {\n    current: undefined,\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    constructor(init, options = {}) {\n        /**\n         * This will be replaced by the build step with the latest version number.\n         * When MotionValues are provided to motion components, warn if versions are mixed.\n         */\n        this.version = \"12.4.1\";\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = null;\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        this.updateAndNotify = (v, render = true) => {\n            const currentTime = time.now();\n            /**\n             * If we're updating the value during another frame or eventloop\n             * than the previous frame, then the we set the previous frame value\n             * to current.\n             */\n            if (this.updatedAt !== currentTime) {\n                this.setPrevFrameValue();\n            }\n            this.prev = this.current;\n            this.setCurrent(v);\n            // Update update subscribers\n            if (this.current !== this.prev && this.events.change) {\n                this.events.change.notify(this.current);\n            }\n            // Update render subscribers\n            if (render && this.events.renderRequest) {\n                this.events.renderRequest.notify(this.current);\n            }\n        };\n        this.hasAnimated = false;\n        this.setCurrent(init);\n        this.owner = options.owner;\n    }\n    setCurrent(current) {\n        this.current = current;\n        this.updatedAt = time.now();\n        if (this.canTrackVelocity === null && current !== undefined) {\n            this.canTrackVelocity = isFloat(this.current);\n        }\n    }\n    setPrevFrameValue(prevFrameValue = this.current) {\n        this.prevFrameValue = prevFrameValue;\n        this.prevUpdatedAt = this.updatedAt;\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @deprecated\n     */\n    onChange(subscription) {\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\n        }\n        return this.on(\"change\", subscription);\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        const unsubscribe = this.events[eventName].add(callback);\n        if (eventName === \"change\") {\n            return () => {\n                unsubscribe();\n                /**\n                 * If we have no more change listeners by the start\n                 * of the next frame, stop active animations.\n                 */\n                frame.read(() => {\n                    if (!this.events.change.getSize()) {\n                        this.stop();\n                    }\n                });\n            };\n        }\n        return unsubscribe;\n    }\n    clearListeners() {\n        for (const eventManagers in this.events) {\n            this.events[eventManagers].clear();\n        }\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    attach(passiveEffect, stopPassiveEffect) {\n        this.passiveEffect = passiveEffect;\n        this.stopPassiveEffect = stopPassiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    setWithVelocity(prev, current, delta) {\n        this.set(current);\n        this.prev = undefined;\n        this.prevFrameValue = prev;\n        this.prevUpdatedAt = this.updatedAt - delta;\n    }\n    /**\n     * Set the state of the `MotionValue`, stopping any active animations,\n     * effects, and resets velocity to `0`.\n     */\n    jump(v, endAnimation = true) {\n        this.updateAndNotify(v);\n        this.prev = v;\n        this.prevUpdatedAt = this.prevFrameValue = undefined;\n        endAnimation && this.stop();\n        if (this.stopPassiveEffect)\n            this.stopPassiveEffect();\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        if (collectMotionValues.current) {\n            collectMotionValues.current.push(this);\n        }\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        const currentTime = time.now();\n        if (!this.canTrackVelocity ||\n            this.prevFrameValue === undefined ||\n            currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {\n            return 0;\n        }\n        const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);\n        // Casts because of parseFloat's poor typing\n        return velocityPerSecond(parseFloat(this.current) -\n            parseFloat(this.prevFrameValue), delta);\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    start(startAnimation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.animation = startAnimation(resolve);\n            if (this.events.animationStart) {\n                this.events.animationStart.notify();\n            }\n        }).then(() => {\n            if (this.events.animationComplete) {\n                this.events.animationComplete.notify();\n            }\n            this.clearAnimation();\n        });\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.animation) {\n            this.animation.stop();\n            if (this.events.animationCancel) {\n                this.events.animationCancel.notify();\n            }\n        }\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.animation;\n    }\n    clearAnimation() {\n        delete this.animation;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.clearListeners();\n        this.stop();\n        if (this.stopPassiveEffect) {\n            this.stopPassiveEffect();\n        }\n    }\n}\nfunction motionValue(init, options) {\n    return new MotionValue(init, options);\n}\n\nexport { MotionValue, collectMotionValues, motionValue };\n","/*#__NO_SIDE_EFFECTS__*/\nfunction memo(callback) {\n    let result;\n    return () => {\n        if (result === undefined)\n            result = callback();\n        return result;\n    };\n}\n\nexport { memo };\n","import '../../../../../motion-utils/dist/es/errors.mjs';\nimport { memo } from '../../../../../motion-utils/dist/es/memo.mjs';\n\nconst supportsScrollTimeline = memo(() => window.ScrollTimeline !== undefined);\n\nexport { supportsScrollTimeline };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\n/*#__NO_SIDE_EFFECTS__*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","// If this number is a decimal, make it just five decimal places\n// to avoid exponents\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\n\nexport { sanitize };\n","const floatRegex = /-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/gu;\n\nexport { floatRegex };\n","function isNullish(v) {\n    return v == null;\n}\n\nexport { isNullish };\n","const singleColorRegex = /^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$/iu;\n\nexport { singleColorRegex };\n","import { floatRegex } from '../utils/float-regex.mjs';\nimport { isNullish } from '../utils/is-nullish.mjs';\nimport { singleColorRegex } from '../utils/single-color-regex.mjs';\n\n/**\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\n * but false if a number or multiple colors\n */\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((typeof v === \"string\" &&\n        singleColorRegex.test(v) &&\n        v.startsWith(type)) ||\n        (testProp &&\n            !isNullish(v) &&\n            Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (typeof v !== \"string\")\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","import { clamp } from '../../../utils/clamp.mjs';\nimport { alpha, number } from '../numbers/index.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = (v) => clamp(0, 255, v);\nconst rgbUnit = {\n    ...number,\n    transform: (v) => Math.round(clampRgbUnit(v)),\n};\nconst rgba = {\n    test: /*@__PURE__*/ isColorString(\"rgb\", \"red\"),\n    parse: /*@__PURE__*/ splitColor(\"red\", \"green\", \"blue\"),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\n        rgbUnit.transform(red) +\n        \", \" +\n        rgbUnit.transform(green) +\n        \", \" +\n        rgbUnit.transform(blue) +\n        \", \" +\n        sanitize(alpha.transform(alpha$1)) +\n        \")\",\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = \"\";\n    let g = \"\";\n    let b = \"\";\n    let a = \"\";\n    // If we have 6 characters, ie #FF0000\n    if (v.length > 5) {\n        r = v.substring(1, 3);\n        g = v.substring(3, 5);\n        b = v.substring(5, 7);\n        a = v.substring(7, 9);\n        // Or we have 3 characters, ie #F00\n    }\n    else {\n        r = v.substring(1, 2);\n        g = v.substring(2, 3);\n        b = v.substring(3, 4);\n        a = v.substring(4, 5);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: /*@__PURE__*/ isColorString(\"#\"),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: /*@__PURE__*/ isColorString(\"hsl\", \"hue\"),\n    parse: /*@__PURE__*/ splitColor(\"hue\", \"saturation\", \"lightness\"),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return (\"hsla(\" +\n            Math.round(hue) +\n            \", \" +\n            percent.transform(sanitize(saturation)) +\n            \", \" +\n            percent.transform(sanitize(lightness)) +\n            \", \" +\n            sanitize(alpha.transform(alpha$1)) +\n            \")\");\n    },\n};\n\nexport { hsla };\n","import { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return typeof v === \"string\"\n            ? v\n            : v.hasOwnProperty(\"red\")\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","const colorRegex = /(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))/giu;\n\nexport { colorRegex };\n","import { color } from '../color/index.mjs';\nimport { colorRegex } from '../utils/color-regex.mjs';\nimport { floatRegex } from '../utils/float-regex.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\n\nfunction test(v) {\n    var _a, _b;\n    return (isNaN(v) &&\n        typeof v === \"string\" &&\n        (((_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) || 0) +\n            (((_b = v.match(colorRegex)) === null || _b === void 0 ? void 0 : _b.length) || 0) >\n            0);\n}\nconst NUMBER_TOKEN = \"number\";\nconst COLOR_TOKEN = \"color\";\nconst VAR_TOKEN = \"var\";\nconst VAR_FUNCTION_TOKEN = \"var(\";\nconst SPLIT_TOKEN = \"${}\";\n// this regex consists of the `singleCssVariableRegex|rgbHSLValueRegex|digitRegex`\nconst complexRegex = /var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/giu;\nfunction analyseComplexValue(value) {\n    const originalValue = value.toString();\n    const values = [];\n    const indexes = {\n        color: [],\n        number: [],\n        var: [],\n    };\n    const types = [];\n    let i = 0;\n    const tokenised = originalValue.replace(complexRegex, (parsedValue) => {\n        if (color.test(parsedValue)) {\n            indexes.color.push(i);\n            types.push(COLOR_TOKEN);\n            values.push(color.parse(parsedValue));\n        }\n        else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {\n            indexes.var.push(i);\n            types.push(VAR_TOKEN);\n            values.push(parsedValue);\n        }\n        else {\n            indexes.number.push(i);\n            types.push(NUMBER_TOKEN);\n            values.push(parseFloat(parsedValue));\n        }\n        ++i;\n        return SPLIT_TOKEN;\n    });\n    const split = tokenised.split(SPLIT_TOKEN);\n    return { values, split, indexes, types };\n}\nfunction parseComplexValue(v) {\n    return analyseComplexValue(v).values;\n}\nfunction createTransformer(source) {\n    const { split, types } = analyseComplexValue(source);\n    const numSections = split.length;\n    return (v) => {\n        let output = \"\";\n        for (let i = 0; i < numSections; i++) {\n            output += split[i];\n            if (v[i] !== undefined) {\n                const type = types[i];\n                if (type === NUMBER_TOKEN) {\n                    output += sanitize(v[i]);\n                }\n                else if (type === COLOR_TOKEN) {\n                    output += color.transform(v[i]);\n                }\n                else {\n                    output += v[i];\n                }\n            }\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : v;\nfunction getAnimatableNone(v) {\n    const parsed = parseComplexValue(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = {\n    test,\n    parse: parseComplexValue,\n    createTransformer,\n    getAnimatableNone,\n};\n\nexport { analyseComplexValue, complex };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mixNumber = (from, to, progress) => {\n    return from + (to - from) * progress;\n};\n\nexport { mixNumber };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","function mixImmediate(a, b) {\n    return (p) => (p > 0 ? b : a);\n}\n\nexport { mixImmediate };\n","import { mixNumber } from './number.mjs';\nimport { warning } from '../../../../../motion-utils/dist/es/errors.mjs';\nimport { hslaToRgba } from '../hsla-to-rgba.mjs';\nimport { hex } from '../../value/types/color/hex.mjs';\nimport { rgba } from '../../value/types/color/rgba.mjs';\nimport { hsla } from '../../value/types/color/hsla.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    const expo = v * (to * to - fromExpo) + fromExpo;\n    return expo < 0 ? 0 : Math.sqrt(expo);\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    warning(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\n    if (!Boolean(type))\n        return false;\n    let model = type.parse(color);\n    if (type === hsla) {\n        // TODO Remove this cast - needed since Motion's stricter typing\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    if (!fromRGBA || !toRGBA) {\n        return mixImmediate(from, to);\n    }\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mixNumber(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","const invisibleValues = new Set([\"none\", \"hidden\"]);\n/**\n * Returns a function that, when provided a progress value between 0 and 1,\n * will return the \"none\" or \"hidden\" string only when the progress is that of\n * the origin or target.\n */\nfunction mixVisibility(origin, target) {\n    if (invisibleValues.has(origin)) {\n        return (p) => (p <= 0 ? origin : target);\n    }\n    else {\n        return (p) => (p >= 1 ? target : origin);\n    }\n}\n\nexport { invisibleValues, mixVisibility };\n","import { mixNumber as mixNumber$1 } from './number.mjs';\nimport { mixColor } from './color.mjs';\nimport { pipe } from '../pipe.mjs';\nimport { warning } from '../../../../../motion-utils/dist/es/errors.mjs';\nimport { color } from '../../value/types/color/index.mjs';\nimport { complex, analyseComplexValue } from '../../value/types/complex/index.mjs';\nimport { isCSSVariableToken } from '../../render/dom/utils/is-css-variable.mjs';\nimport { invisibleValues, mixVisibility } from './visibility.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\nfunction mixNumber(a, b) {\n    return (p) => mixNumber$1(a, b, p);\n}\nfunction getMixer(a) {\n    if (typeof a === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof a === \"string\") {\n        return isCSSVariableToken(a)\n            ? mixImmediate\n            : color.test(a)\n                ? mixColor\n                : mixComplex;\n    }\n    else if (Array.isArray(a)) {\n        return mixArray;\n    }\n    else if (typeof a === \"object\") {\n        return color.test(a) ? mixColor : mixObject;\n    }\n    return mixImmediate;\n}\nfunction mixArray(a, b) {\n    const output = [...a];\n    const numValues = output.length;\n    const blendValue = a.map((v, i) => getMixer(v)(v, b[i]));\n    return (p) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](p);\n        }\n        return output;\n    };\n}\nfunction mixObject(a, b) {\n    const output = { ...a, ...b };\n    const blendValue = {};\n    for (const key in output) {\n        if (a[key] !== undefined && b[key] !== undefined) {\n            blendValue[key] = getMixer(a[key])(a[key], b[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n}\nfunction matchOrder(origin, target) {\n    var _a;\n    const orderedOrigin = [];\n    const pointers = { color: 0, var: 0, number: 0 };\n    for (let i = 0; i < target.values.length; i++) {\n        const type = target.types[i];\n        const originIndex = origin.indexes[type][pointers[type]];\n        const originValue = (_a = origin.values[originIndex]) !== null && _a !== void 0 ? _a : 0;\n        orderedOrigin[i] = originValue;\n        pointers[type]++;\n    }\n    return orderedOrigin;\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyseComplexValue(origin);\n    const targetStats = analyseComplexValue(target);\n    const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length &&\n        originStats.indexes.color.length === targetStats.indexes.color.length &&\n        originStats.indexes.number.length >= targetStats.indexes.number.length;\n    if (canInterpolate) {\n        if ((invisibleValues.has(origin) &&\n            !targetStats.values.length) ||\n            (invisibleValues.has(target) &&\n                !originStats.values.length)) {\n            return mixVisibility(origin, target);\n        }\n        return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return mixImmediate(origin, target);\n    }\n};\n\nexport { getMixer, mixArray, mixComplex, mixObject };\n","import { getMixer } from './complex.mjs';\nimport { mixNumber } from './number.mjs';\n\nfunction mix(from, to, p) {\n    if (typeof from === \"number\" &&\n        typeof to === \"number\" &&\n        typeof p === \"number\") {\n        return mixNumber(from, to, p);\n    }\n    const mixer = getMixer(from);\n    return mixer(from, to);\n}\n\nexport { mix };\n","import { invariant } from '../../../../motion-utils/dist/es/errors.mjs';\nimport { noop } from '../../../../motion-utils/dist/es/noop.mjs';\nimport { progress } from '../../../../motion-utils/dist/es/progress.mjs';\nimport { clamp } from './clamp.mjs';\nimport { mix } from './mix/index.mjs';\nimport { pipe } from './pipe.mjs';\n\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || mix;\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revist this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\n    /**\n     * If we're only provided a single input, we can just make a function\n     * that returns the output.\n     */\n    if (inputLength === 1)\n        return () => output[0];\n    if (inputLength === 2 && output[0] === output[1])\n        return () => output[1];\n    const isZeroDeltaRange = input[0] === input[1];\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        if (isZeroDeltaRange && v < input[0])\n            return output[0];\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import '../../../../../motion-utils/dist/es/errors.mjs';\nimport { progress } from '../../../../../motion-utils/dist/es/progress.mjs';\nimport { mixNumber } from '../mix/number.mjs';\n\nfunction fillOffset(offset, remaining) {\n    const min = offset[offset.length - 1];\n    for (let i = 1; i <= remaining; i++) {\n        const offsetProgress = progress(0, remaining, i);\n        offset.push(mixNumber(min, 1, offsetProgress));\n    }\n}\n\nexport { fillOffset };\n","import { fillOffset } from './fill.mjs';\n\nfunction defaultOffset(arr) {\n    const offset = [0];\n    fillOffset(offset, arr.length - 1);\n    return offset;\n}\n\nexport { defaultOffset };\n","function resolveElements(elementOrSelector, scope, selectorCache) {\n    var _a;\n    if (elementOrSelector instanceof Element) {\n        return [elementOrSelector];\n    }\n    else if (typeof elementOrSelector === \"string\") {\n        let root = document;\n        if (scope) {\n            // TODO: Refactor to utils package\n            // invariant(\n            //     Boolean(scope.current),\n            //     \"Scope provided, but no element detected.\"\n            // )\n            root = scope.current;\n        }\n        const elements = (_a = selectorCache === null || selectorCache === void 0 ? void 0 : selectorCache[elementOrSelector]) !== null && _a !== void 0 ? _a : root.querySelectorAll(elementOrSelector);\n        return elements ? Array.from(elements) : [];\n    }\n    return Array.from(elementOrSelector);\n}\n\nexport { resolveElements };\n","import { frame, cancelFrame } from '../../../frameloop/frame.mjs';\n\nfunction observeTimeline(update, timeline) {\n    let prevProgress;\n    const onFrame = () => {\n        const { currentTime } = timeline;\n        const percentage = currentTime === null ? 0 : currentTime.value;\n        const progress = percentage / 100;\n        if (prevProgress !== progress) {\n            update(progress);\n        }\n        prevProgress = progress;\n    };\n    frame.update(onFrame, true);\n    return () => cancelFrame(onFrame);\n}\n\nexport { observeTimeline };\n","import '../../../../../../motion-utils/dist/es/errors.mjs';\nimport { resolveElements } from '../../../../../../motion-dom/dist/es/utils/resolve-elements.mjs';\n\nconst resizeHandlers = new WeakMap();\nlet observer;\nfunction getElementSize(target, borderBoxSize) {\n    if (borderBoxSize) {\n        const { inlineSize, blockSize } = borderBoxSize[0];\n        return { width: inlineSize, height: blockSize };\n    }\n    else if (target instanceof SVGElement && \"getBBox\" in target) {\n        return target.getBBox();\n    }\n    else {\n        return {\n            width: target.offsetWidth,\n            height: target.offsetHeight,\n        };\n    }\n}\nfunction notifyTarget({ target, contentRect, borderBoxSize, }) {\n    var _a;\n    (_a = resizeHandlers.get(target)) === null || _a === void 0 ? void 0 : _a.forEach((handler) => {\n        handler({\n            target,\n            contentSize: contentRect,\n            get size() {\n                return getElementSize(target, borderBoxSize);\n            },\n        });\n    });\n}\nfunction notifyAll(entries) {\n    entries.forEach(notifyTarget);\n}\nfunction createResizeObserver() {\n    if (typeof ResizeObserver === \"undefined\")\n        return;\n    observer = new ResizeObserver(notifyAll);\n}\nfunction resizeElement(target, handler) {\n    if (!observer)\n        createResizeObserver();\n    const elements = resolveElements(target);\n    elements.forEach((element) => {\n        let elementHandlers = resizeHandlers.get(element);\n        if (!elementHandlers) {\n            elementHandlers = new Set();\n            resizeHandlers.set(element, elementHandlers);\n        }\n        elementHandlers.add(handler);\n        observer === null || observer === void 0 ? void 0 : observer.observe(element);\n    });\n    return () => {\n        elements.forEach((element) => {\n            const elementHandlers = resizeHandlers.get(element);\n            elementHandlers === null || elementHandlers === void 0 ? void 0 : elementHandlers.delete(handler);\n            if (!(elementHandlers === null || elementHandlers === void 0 ? void 0 : elementHandlers.size)) {\n                observer === null || observer === void 0 ? void 0 : observer.unobserve(element);\n            }\n        });\n    };\n}\n\nexport { resizeElement };\n","const windowCallbacks = new Set();\nlet windowResizeHandler;\nfunction createWindowResizeHandler() {\n    windowResizeHandler = () => {\n        const size = {\n            width: window.innerWidth,\n            height: window.innerHeight,\n        };\n        const info = {\n            target: window,\n            size,\n            contentSize: size,\n        };\n        windowCallbacks.forEach((callback) => callback(info));\n    };\n    window.addEventListener(\"resize\", windowResizeHandler);\n}\nfunction resizeWindow(callback) {\n    windowCallbacks.add(callback);\n    if (!windowResizeHandler)\n        createWindowResizeHandler();\n    return () => {\n        windowCallbacks.delete(callback);\n        if (!windowCallbacks.size && windowResizeHandler) {\n            windowResizeHandler = undefined;\n        }\n    };\n}\n\nexport { resizeWindow };\n","import { resizeElement } from './handle-element.mjs';\nimport { resizeWindow } from './handle-window.mjs';\n\nfunction resize(a, b) {\n    return typeof a === \"function\" ? resizeWindow(a) : resizeElement(a, b);\n}\n\nexport { resize };\n","import '../../../../../../motion-utils/dist/es/errors.mjs';\nimport { progress } from '../../../../../../motion-utils/dist/es/progress.mjs';\nimport { velocityPerSecond } from '../../../utils/velocity-per-second.mjs';\n\n/**\n * A time in milliseconds, beyond which we consider the scroll velocity to be 0.\n */\nconst maxElapsed = 50;\nconst createAxisInfo = () => ({\n    current: 0,\n    offset: [],\n    progress: 0,\n    scrollLength: 0,\n    targetOffset: 0,\n    targetLength: 0,\n    containerLength: 0,\n    velocity: 0,\n});\nconst createScrollInfo = () => ({\n    time: 0,\n    x: createAxisInfo(),\n    y: createAxisInfo(),\n});\nconst keys = {\n    x: {\n        length: \"Width\",\n        position: \"Left\",\n    },\n    y: {\n        length: \"Height\",\n        position: \"Top\",\n    },\n};\nfunction updateAxisInfo(element, axisName, info, time) {\n    const axis = info[axisName];\n    const { length, position } = keys[axisName];\n    const prev = axis.current;\n    const prevTime = info.time;\n    axis.current = element[`scroll${position}`];\n    axis.scrollLength = element[`scroll${length}`] - element[`client${length}`];\n    axis.offset.length = 0;\n    axis.offset[0] = 0;\n    axis.offset[1] = axis.scrollLength;\n    axis.progress = progress(0, axis.scrollLength, axis.current);\n    const elapsed = time - prevTime;\n    axis.velocity =\n        elapsed > maxElapsed\n            ? 0\n            : velocityPerSecond(axis.current - prev, elapsed);\n}\nfunction updateScrollInfo(element, info, time) {\n    updateAxisInfo(element, \"x\", info, time);\n    updateAxisInfo(element, \"y\", info, time);\n    info.time = time;\n}\n\nexport { createScrollInfo, updateScrollInfo };\n","function calcInset(element, container) {\n    const inset = { x: 0, y: 0 };\n    let current = element;\n    while (current && current !== container) {\n        if (current instanceof HTMLElement) {\n            inset.x += current.offsetLeft;\n            inset.y += current.offsetTop;\n            current = current.offsetParent;\n        }\n        else if (current.tagName === \"svg\") {\n            /**\n             * This isn't an ideal approach to measuring the offset of <svg /> tags.\n             * It would be preferable, given they behave like HTMLElements in most ways\n             * to use offsetLeft/Top. But these don't exist on <svg />. Likewise we\n             * can't use .getBBox() like most SVG elements as these provide the offset\n             * relative to the SVG itself, which for <svg /> is usually 0x0.\n             */\n            const svgBoundingBox = current.getBoundingClientRect();\n            current = current.parentElement;\n            const parentBoundingBox = current.getBoundingClientRect();\n            inset.x += svgBoundingBox.left - parentBoundingBox.left;\n            inset.y += svgBoundingBox.top - parentBoundingBox.top;\n        }\n        else if (current instanceof SVGGraphicsElement) {\n            const { x, y } = current.getBBox();\n            inset.x += x;\n            inset.y += y;\n            let svg = null;\n            let parent = current.parentNode;\n            while (!svg) {\n                if (parent.tagName === \"svg\") {\n                    svg = parent;\n                }\n                parent = current.parentNode;\n            }\n            current = svg;\n        }\n        else {\n            break;\n        }\n    }\n    return inset;\n}\n\nexport { calcInset };\n","const namedEdges = {\n    start: 0,\n    center: 0.5,\n    end: 1,\n};\nfunction resolveEdge(edge, length, inset = 0) {\n    let delta = 0;\n    /**\n     * If we have this edge defined as a preset, replace the definition\n     * with the numerical value.\n     */\n    if (edge in namedEdges) {\n        edge = namedEdges[edge];\n    }\n    /**\n     * Handle unit values\n     */\n    if (typeof edge === \"string\") {\n        const asNumber = parseFloat(edge);\n        if (edge.endsWith(\"px\")) {\n            delta = asNumber;\n        }\n        else if (edge.endsWith(\"%\")) {\n            edge = asNumber / 100;\n        }\n        else if (edge.endsWith(\"vw\")) {\n            delta = (asNumber / 100) * document.documentElement.clientWidth;\n        }\n        else if (edge.endsWith(\"vh\")) {\n            delta = (asNumber / 100) * document.documentElement.clientHeight;\n        }\n        else {\n            edge = asNumber;\n        }\n    }\n    /**\n     * If the edge is defined as a number, handle as a progress value.\n     */\n    if (typeof edge === \"number\") {\n        delta = length * edge;\n    }\n    return inset + delta;\n}\n\nexport { namedEdges, resolveEdge };\n","import { resolveEdge, namedEdges } from './edge.mjs';\n\nconst defaultOffset = [0, 0];\nfunction resolveOffset(offset, containerLength, targetLength, targetInset) {\n    let offsetDefinition = Array.isArray(offset) ? offset : defaultOffset;\n    let targetPoint = 0;\n    let containerPoint = 0;\n    if (typeof offset === \"number\") {\n        /**\n         * If we're provided offset: [0, 0.5, 1] then each number x should become\n         * [x, x], so we default to the behaviour of mapping 0 => 0 of both target\n         * and container etc.\n         */\n        offsetDefinition = [offset, offset];\n    }\n    else if (typeof offset === \"string\") {\n        offset = offset.trim();\n        if (offset.includes(\" \")) {\n            offsetDefinition = offset.split(\" \");\n        }\n        else {\n            /**\n             * If we're provided a definition like \"100px\" then we want to apply\n             * that only to the top of the target point, leaving the container at 0.\n             * Whereas a named offset like \"end\" should be applied to both.\n             */\n            offsetDefinition = [offset, namedEdges[offset] ? offset : `0`];\n        }\n    }\n    targetPoint = resolveEdge(offsetDefinition[0], targetLength, targetInset);\n    containerPoint = resolveEdge(offsetDefinition[1], containerLength);\n    return targetPoint - containerPoint;\n}\n\nexport { resolveOffset };\n","const ScrollOffset = {\n    Enter: [\n        [0, 1],\n        [1, 1],\n    ],\n    Exit: [\n        [0, 0],\n        [1, 0],\n    ],\n    Any: [\n        [1, 0],\n        [0, 1],\n    ],\n    All: [\n        [0, 0],\n        [1, 1],\n    ],\n};\n\nexport { ScrollOffset };\n","import { clamp } from '../../../../utils/clamp.mjs';\nimport { interpolate } from '../../../../utils/interpolate.mjs';\nimport { defaultOffset } from '../../../../utils/offsets/default.mjs';\nimport { calcInset } from './inset.mjs';\nimport { resolveOffset } from './offset.mjs';\nimport { ScrollOffset } from './presets.mjs';\n\nconst point = { x: 0, y: 0 };\nfunction getTargetSize(target) {\n    return \"getBBox\" in target && target.tagName !== \"svg\"\n        ? target.getBBox()\n        : { width: target.clientWidth, height: target.clientHeight };\n}\nfunction resolveOffsets(container, info, options) {\n    const { offset: offsetDefinition = ScrollOffset.All } = options;\n    const { target = container, axis = \"y\" } = options;\n    const lengthLabel = axis === \"y\" ? \"height\" : \"width\";\n    const inset = target !== container ? calcInset(target, container) : point;\n    /**\n     * Measure the target and container. If they're the same thing then we\n     * use the container's scrollWidth/Height as the target, from there\n     * all other calculations can remain the same.\n     */\n    const targetSize = target === container\n        ? { width: container.scrollWidth, height: container.scrollHeight }\n        : getTargetSize(target);\n    const containerSize = {\n        width: container.clientWidth,\n        height: container.clientHeight,\n    };\n    /**\n     * Reset the length of the resolved offset array rather than creating a new one.\n     * TODO: More reusable data structures for targetSize/containerSize would also be good.\n     */\n    info[axis].offset.length = 0;\n    /**\n     * Populate the offset array by resolving the user's offset definition into\n     * a list of pixel scroll offets.\n     */\n    let hasChanged = !info[axis].interpolate;\n    const numOffsets = offsetDefinition.length;\n    for (let i = 0; i < numOffsets; i++) {\n        const offset = resolveOffset(offsetDefinition[i], containerSize[lengthLabel], targetSize[lengthLabel], inset[axis]);\n        if (!hasChanged && offset !== info[axis].interpolatorOffsets[i]) {\n            hasChanged = true;\n        }\n        info[axis].offset[i] = offset;\n    }\n    /**\n     * If the pixel scroll offsets have changed, create a new interpolator function\n     * to map scroll value into a progress.\n     */\n    if (hasChanged) {\n        info[axis].interpolate = interpolate(info[axis].offset, defaultOffset(offsetDefinition), { clamp: false });\n        info[axis].interpolatorOffsets = [...info[axis].offset];\n    }\n    info[axis].progress = clamp(0, 1, info[axis].interpolate(info[axis].current));\n}\n\nexport { resolveOffsets };\n","import { warnOnce } from '../../../utils/warn-once.mjs';\nimport { updateScrollInfo } from './info.mjs';\nimport { resolveOffsets } from './offsets/index.mjs';\n\nfunction measure(container, target = container, info) {\n    /**\n     * Find inset of target within scrollable container\n     */\n    info.x.targetOffset = 0;\n    info.y.targetOffset = 0;\n    if (target !== container) {\n        let node = target;\n        while (node && node !== container) {\n            info.x.targetOffset += node.offsetLeft;\n            info.y.targetOffset += node.offsetTop;\n            node = node.offsetParent;\n        }\n    }\n    info.x.targetLength =\n        target === container ? target.scrollWidth : target.clientWidth;\n    info.y.targetLength =\n        target === container ? target.scrollHeight : target.clientHeight;\n    info.x.containerLength = container.clientWidth;\n    info.y.containerLength = container.clientHeight;\n    /**\n     * In development mode ensure scroll containers aren't position: static as this makes\n     * it difficult to measure their relative positions.\n     */\n    if (process.env.NODE_ENV !== \"production\") {\n        if (container && target && target !== container) {\n            warnOnce(getComputedStyle(container).position !== \"static\", \"Please ensure that the container has a non-static position, like 'relative', 'fixed', or 'absolute' to ensure scroll offset is calculated correctly.\");\n        }\n    }\n}\nfunction createOnScrollHandler(element, onScroll, info, options = {}) {\n    return {\n        measure: () => measure(element, options.target, info),\n        update: (time) => {\n            updateScrollInfo(element, info, time);\n            if (options.offset || options.target) {\n                resolveOffsets(element, info, options);\n            }\n        },\n        notify: () => onScroll(info),\n    };\n}\n\nexport { createOnScrollHandler };\n","import { resize } from '../resize/index.mjs';\nimport { createScrollInfo } from './info.mjs';\nimport { createOnScrollHandler } from './on-scroll-handler.mjs';\nimport { frame, cancelFrame, frameData } from '../../../frameloop/frame.mjs';\n\nconst scrollListeners = new WeakMap();\nconst resizeListeners = new WeakMap();\nconst onScrollHandlers = new WeakMap();\nconst getEventTarget = (element) => element === document.documentElement ? window : element;\nfunction scrollInfo(onScroll, { container = document.documentElement, ...options } = {}) {\n    let containerHandlers = onScrollHandlers.get(container);\n    /**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */\n    if (!containerHandlers) {\n        containerHandlers = new Set();\n        onScrollHandlers.set(container, containerHandlers);\n    }\n    /**\n     * Create a new onScroll handler for the provided callback.\n     */\n    const info = createScrollInfo();\n    const containerHandler = createOnScrollHandler(container, onScroll, info, options);\n    containerHandlers.add(containerHandler);\n    /**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */\n    if (!scrollListeners.has(container)) {\n        const measureAll = () => {\n            for (const handler of containerHandlers)\n                handler.measure();\n        };\n        const updateAll = () => {\n            for (const handler of containerHandlers) {\n                handler.update(frameData.timestamp);\n            }\n        };\n        const notifyAll = () => {\n            for (const handler of containerHandlers)\n                handler.notify();\n        };\n        const listener = () => {\n            frame.read(measureAll, false, true);\n            frame.read(updateAll, false, true);\n            frame.update(notifyAll, false, true);\n        };\n        scrollListeners.set(container, listener);\n        const target = getEventTarget(container);\n        window.addEventListener(\"resize\", listener, { passive: true });\n        if (container !== document.documentElement) {\n            resizeListeners.set(container, resize(container, listener));\n        }\n        target.addEventListener(\"scroll\", listener, { passive: true });\n    }\n    const listener = scrollListeners.get(container);\n    frame.read(listener, false, true);\n    return () => {\n        var _a;\n        cancelFrame(listener);\n        /**\n         * Check if we even have any handlers for this container.\n         */\n        const currentHandlers = onScrollHandlers.get(container);\n        if (!currentHandlers)\n            return;\n        currentHandlers.delete(containerHandler);\n        if (currentHandlers.size)\n            return;\n        /**\n         * If no more handlers, remove the scroll listener too.\n         */\n        const scrollListener = scrollListeners.get(container);\n        scrollListeners.delete(container);\n        if (scrollListener) {\n            getEventTarget(container).removeEventListener(\"scroll\", scrollListener);\n            (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n            window.removeEventListener(\"resize\", scrollListener);\n        }\n    };\n}\n\nexport { scrollInfo };\n","import { supportsScrollTimeline } from '../../../../../../motion-dom/dist/es/utils/supports/scroll-timeline.mjs';\nimport '../../../../../../motion-utils/dist/es/errors.mjs';\nimport { noop } from '../../../../../../motion-utils/dist/es/noop.mjs';\nimport { observeTimeline } from './observe.mjs';\nimport { scrollInfo } from './track.mjs';\n\nfunction scrollTimelineFallback({ source, container, axis = \"y\", }) {\n    // Support legacy source argument. Deprecate later.\n    if (source)\n        container = source;\n    // ScrollTimeline records progress as a percentage CSSUnitValue\n    const currentTime = { value: 0 };\n    const cancel = scrollInfo((info) => {\n        currentTime.value = info[axis].progress * 100;\n    }, { container, axis });\n    return { currentTime, cancel };\n}\nconst timelineCache = new Map();\nfunction getTimeline({ source, container = document.documentElement, axis = \"y\", } = {}) {\n    // Support legacy source argument. Deprecate later.\n    if (source)\n        container = source;\n    if (!timelineCache.has(container)) {\n        timelineCache.set(container, {});\n    }\n    const elementCache = timelineCache.get(container);\n    if (!elementCache[axis]) {\n        elementCache[axis] = supportsScrollTimeline()\n            ? new ScrollTimeline({ source: container, axis })\n            : scrollTimelineFallback({ source: container, axis });\n    }\n    return elementCache[axis];\n}\n/**\n * If the onScroll function has two arguments, it's expecting\n * more specific information about the scroll from scrollInfo.\n */\nfunction isOnScrollWithInfo(onScroll) {\n    return onScroll.length === 2;\n}\n/**\n * Currently, we only support element tracking with `scrollInfo`, though in\n * the future we can also offer ViewTimeline support.\n */\nfunction needsElementTracking(options) {\n    return options && (options.target || options.offset);\n}\nfunction scrollFunction(onScroll, options) {\n    if (isOnScrollWithInfo(onScroll) || needsElementTracking(options)) {\n        return scrollInfo((info) => {\n            onScroll(info[options.axis].progress, info);\n        }, options);\n    }\n    else {\n        return observeTimeline(onScroll, getTimeline(options));\n    }\n}\nfunction scrollAnimation(animation, options) {\n    animation.flatten();\n    if (needsElementTracking(options)) {\n        animation.pause();\n        return scrollInfo((info) => {\n            animation.time = animation.duration * info[options.axis].progress;\n        }, options);\n    }\n    else {\n        const timeline = getTimeline(options);\n        if (animation.attachTimeline) {\n            return animation.attachTimeline(timeline, (valueAnimation) => {\n                valueAnimation.pause();\n                return observeTimeline((progress) => {\n                    valueAnimation.time = valueAnimation.duration * progress;\n                }, timeline);\n            });\n        }\n        else {\n            return noop;\n        }\n    }\n}\nfunction scroll(onScroll, { axis = \"y\", ...options } = {}) {\n    const optionsWithDefaults = { axis, ...options };\n    return typeof onScroll === \"function\"\n        ? scrollFunction(onScroll, optionsWithDefaults)\n        : scrollAnimation(onScroll, optionsWithDefaults);\n}\n\nexport { scroll };\n","import { motionValue } from './index.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\nimport { useEffect } from 'react';\nimport { warning } from '../../../../motion-utils/dist/es/errors.mjs';\nimport { scroll } from '../render/dom/scroll/index.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\n\nfunction refWarning(name, ref) {\n    warning(Boolean(!ref || ref.current), `You have defined a ${name} options but the provided ref is not yet hydrated, probably because it's defined higher up the tree. Try calling useScroll() in the same component as the ref, or setting its \\`layoutEffect: false\\` option.`);\n}\nconst createScrollMotionValues = () => ({\n    scrollX: motionValue(0),\n    scrollY: motionValue(0),\n    scrollXProgress: motionValue(0),\n    scrollYProgress: motionValue(0),\n});\nfunction useScroll({ container, target, layoutEffect = true, ...options } = {}) {\n    const values = useConstant(createScrollMotionValues);\n    const useLifecycleEffect = layoutEffect\n        ? useIsomorphicLayoutEffect\n        : useEffect;\n    useLifecycleEffect(() => {\n        refWarning(\"target\", target);\n        refWarning(\"container\", container);\n        return scroll((_progress, { x, y }) => {\n            values.scrollX.set(x.current);\n            values.scrollXProgress.set(x.progress);\n            values.scrollY.set(y.current);\n            values.scrollYProgress.set(y.progress);\n        }, {\n            ...options,\n            container: (container === null || container === void 0 ? void 0 : container.current) || undefined,\n            target: (target === null || target === void 0 ? void 0 : target.current) || undefined,\n        });\n    }, [container, target, JSON.stringify(options.offset)]);\n    return values;\n}\n\nexport { useScroll };\n","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\nfunction useAnimationFrame(callback) {\n    const initialTimestamp = useRef(0);\n    const { isStatic } = useContext(MotionConfigContext);\n    useEffect(() => {\n        if (isStatic)\n            return;\n        const provideTimeSinceStart = ({ timestamp, delta }) => {\n            if (!initialTimestamp.current)\n                initialTimestamp.current = timestamp;\n            callback(timestamp - initialTimestamp.current, delta);\n        };\n        frame.update(provideTimeSinceStart, true);\n        return () => cancelFrame(provideTimeSinceStart);\n    }, [callback]);\n}\n\nexport { useAnimationFrame };\n","'use client';\nimport { useAnimationFrame, useScroll } from 'motion/react';\nimport { useRef, useState, useEffect } from 'react';\nimport { lerp, remap } from '@threeaio/utils/math';\nimport { circInOut } from 'motion';\n\ntype SupportedEdgeUnit = 'px' | 'vw' | 'vh' | '%';\ntype EdgeUnit = `${number}${SupportedEdgeUnit}`;\ntype NamedEdges = 'start' | 'end' | 'center';\ntype EdgeString = NamedEdges | EdgeUnit | `${number}`;\ntype Edge = EdgeString | number;\ntype ProgressIntersection = [number, number];\ntype Intersection = `${Edge} ${Edge}`;\ntype ScrollOffset = Array<Edge | Intersection | ProgressIntersection>;\n\n/**\n * Bezier config is an array of 3 numbers\n * [y-coordinate, x-offset, y-offset]\n * y-coordinate: The y coordinate of the control point\n * x-offset: The horizontal shift of the control point\n * y-offset: The vertical shift from the control point\n */\ntype BezierConfig = [number, number, number];\n\nexport interface WaveConfig {\n    left: BezierConfig;\n    right: BezierConfig;\n}\n\nexport interface WaveAnimation {\n    forceOverlay: boolean;\n    featheredFill: string; // the fill color will be masked so that a smooth gradient is visible\n    strokeStyle?: string;\n    fill?: string; // this is the solid fill color\n    configs: WaveConfig[];\n    scrollOffset?: ScrollOffset;\n    curveAmount?: number;\n    offsetLeft?: number;\n    offsetRight?: number;\n}\n\nconst defaultCurveConfig: WaveAnimation = {\n    forceOverlay: false,\n    featheredFill: '#fff',\n    strokeStyle: '#fff',\n    fill: 'rgba(0,0,0,0.1)',\n    configs: [\n        {\n            right: [0.2, 0.9, -0.8],\n            left: [0.7, 0.6, 0.9],\n        },\n        {\n            right: [0.2, 0.9, -0.5],\n            left: [0.7, 0.6, 0.6],\n        },\n        {\n            right: [0.2, 0.9, -0.2],\n            left: [0.7, 0.6, 0.3],\n        },\n    ],\n    scrollOffset: ['start 80%', 'end 90%'],\n};\n\nfunction lerpBezier(start: BezierConfig, end: BezierConfig, t: number): BezierConfig {\n    return [lerp(start[0], end[0], t), lerp(start[1], end[1], t), lerp(start[2], end[2], t)];\n}\n\nfunction lerpBeziers(start: WaveConfig, end: WaveConfig, t: number): WaveConfig {\n    return {\n        left: lerpBezier(start.left, end.left, t),\n        right: lerpBezier(start.right, end.right, t),\n    };\n}\n\nfunction drawWavePath(\n    ctx: CanvasRenderingContext2D,\n    config: WaveConfig,\n    curveIntensity: number = 1,\n    curveAmount = 1,\n    offsetLeft = 0,\n    offsetRight = 0,\n    width: number,\n    height: number,\n) {\n    // Draw main wave\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(width, 0);\n    ctx.lineTo(width, height * config.right[0]);\n\n    // Main curve\n    ctx.bezierCurveTo(\n        width - config.right[1] * width,\n        config.right[0] * height + config.right[2] * curveIntensity * height,\n        config.left[1] * width,\n        config.left[0] * height + config.left[2] * curveIntensity * height,\n        0,\n        config.left[0] * height,\n    );\n    ctx.closePath();\n    ctx.fill();\n\n    // Draw decorative curves\n    for (let i = 0; i < curveAmount; i++) {\n        const offset = i + 1;\n        ctx.beginPath();\n        ctx.moveTo(width, height * config.right[0] + offsetRight * offset);\n        ctx.bezierCurveTo(\n            width - config.right[1] * width,\n            config.right[0] * height + config.right[2] * curveIntensity * height + offsetRight * offset,\n            config.left[1] * width,\n            config.left[0] * height + config.left[2] * curveIntensity * height + offsetLeft * offset,\n            0,\n            config.left[0] * height + offsetLeft * offset,\n        );\n        ctx.stroke();\n    }\n}\n\nexport default function Wave({ waveConfig: curveConfig = defaultCurveConfig }: { waveConfig?: WaveAnimation }) {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const overlayCanvasRef = useRef<HTMLCanvasElement>(null);\n\n    const easingFunction = (x: number) => x;\n\n    const { scrollYProgress } = useScroll({\n        target: containerRef,\n        offset: curveConfig.scrollOffset,\n    });\n\n    const [dpr, setDpr] = useState(1);\n\n    // Add state for current configuration and transition\n    const [currentConfig, setCurrentConfig] = useState<WaveConfig>(curveConfig.configs[0]);\n    const transitionTimeRef = useRef<number | null>(null);\n    const TRANSITION_DURATION = 20;\n\n    // Add a ref to track the last scroll position\n    const lastScrollRef = useRef(scrollYProgress.get());\n\n    useEffect(() => {\n        setDpr(window.devicePixelRatio || 1);\n    }, []);\n\n    useEffect(() => {\n        const handleResize = () => {\n            const canvas = canvasRef.current;\n            const overlayCanvas = overlayCanvasRef.current;\n            const container = containerRef.current;\n            if (!canvas || !container) return;\n\n            const width = container.clientWidth;\n            const height = container.clientHeight;\n\n            // Set display size\n            canvas.style.width = `${width}px`;\n            canvas.style.height = `${height}px`;\n\n            // Set actual size in memory\n            canvas.width = width * dpr;\n            canvas.height = height * dpr;\n\n            // Handle overlay canvas if it exists\n            if (overlayCanvas && curveConfig.forceOverlay) {\n                overlayCanvas.style.width = `${width}px`;\n                overlayCanvas.style.height = `${height}px`;\n                overlayCanvas.width = width * dpr;\n                overlayCanvas.height = height * dpr;\n            }\n        };\n\n        handleResize();\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, [dpr, curveConfig.forceOverlay]);\n\n    const drawWave = (canvas: HTMLCanvasElement | null, config: WaveConfig, fillStyle: string) => {\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // Reset transformation to ensure no accumulation from previous frames.\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n\n        // Clear the entire canvas using its full size in device pixels.\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        // Apply scaling for HiDPI rendering.\n        ctx.scale(dpr, dpr);\n\n        // Set styles for drawing.\n        ctx.fillStyle = fillStyle;\n        ctx.strokeStyle = curveConfig.strokeStyle ?? 'white';\n        ctx.lineWidth = 0.4;\n        // ctx.setLineDash([4, 8]);\n\n        drawWavePath(\n            ctx,\n            config,\n            1,\n            curveConfig.curveAmount ?? 1,\n            curveConfig.offsetLeft ?? 0,\n            curveConfig.offsetRight ?? 0,\n            canvas.width / dpr,\n            canvas.height / dpr,\n        );\n    };\n\n    // Modified animation frame handling\n    useAnimationFrame((time) => {\n        const sp = scrollYProgress.get();\n        const configCount = curveConfig.configs.length;\n\n        // If only one config is provided, use it directly without interpolation\n        const targetConfig =\n            configCount === 1\n                ? curveConfig.configs[0]\n                : (() => {\n                      // Calculate which segment we're in and the progress within that segment\n                      const segmentSize = 1 / (configCount - 1);\n                      const segmentIndex = Math.min(Math.floor(sp / segmentSize), configCount - 2);\n                      const segmentProgress = remap(\n                          segmentIndex * segmentSize,\n                          (segmentIndex + 1) * segmentSize,\n                          0,\n                          1,\n                          sp,\n                      );\n\n                      // Get the two configs to interpolate between\n                      const startConfig = curveConfig.configs[segmentIndex];\n                      const endConfig = curveConfig.configs[segmentIndex + 1];\n\n                      // Calculate target configuration\n                      return lerpBeziers(startConfig, endConfig, segmentProgress);\n                  })();\n\n        // Handle transition timing\n        if (!transitionTimeRef.current) {\n            transitionTimeRef.current = time;\n        }\n\n        // Calculate transition progress\n        const elapsed = time - transitionTimeRef.current;\n        const progress = Math.min(elapsed / TRANSITION_DURATION, 1);\n        const easedProgress = easingFunction(progress);\n\n        // Smoothly transition to target configuration\n        const lerpedConfig: WaveConfig = {\n            left: lerpBezier(currentConfig.left, targetConfig.left, easedProgress),\n            right: lerpBezier(currentConfig.right, targetConfig.right, easedProgress),\n        };\n\n        // Reset transition timing and update current config if scroll position changed\n        setCurrentConfig(lerpedConfig);\n\n        if (sp !== lastScrollRef.current) {\n            transitionTimeRef.current = time;\n            lastScrollRef.current = sp;\n        }\n\n        // Draw the wave with lerped configuration\n        if (curveConfig.forceOverlay) {\n            drawWave(overlayCanvasRef.current, lerpedConfig, curveConfig.fill ?? '#242e2b');\n        }\n        drawWave(canvasRef.current, lerpedConfig, curveConfig.featheredFill);\n    });\n\n    return (\n        <div className=\"absolute inset-0\" ref={containerRef}>\n            {curveConfig.forceOverlay && <canvas ref={overlayCanvasRef} className=\"size-full\" />}\n            <div\n                className=\"absolute inset-0\"\n                style={{ mask: 'linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 100) 40%)' }}\n            >\n                <canvas ref={canvasRef} className=\"size-full\" />\n            </div>\n        </div>\n    );\n}\n"]}
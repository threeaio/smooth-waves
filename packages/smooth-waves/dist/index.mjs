import {createContext,useRef,useState,useEffect,useLayoutEffect,useContext}from'react';import {remap,lerp}from'@threeaio/utils/math';import {jsxs,jsx}from'react/jsx-runtime';var It=Object.defineProperty,Nt=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var ze=(e,t,r)=>t in e?It(e,t,{enumerable:true,configurable:true,writable:true,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))We.call(t,r)&&ze(e,r,t[r]);if(J)for(var r of J(t))Fe.call(t,r)&&ze(e,r,t[r]);return e},C=(e,t)=>Nt(e,Bt(t));var L=(e,t)=>{var r={};for(var o in e)We.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&J)for(var o of J(e))t.indexOf(o)<0&&Fe.call(e,o)&&(r[o]=e[o]);return r};function Le(e){let t=useRef(null);return t.current===null&&(t.current=e()),t.current}var Ve=createContext({transformPagePoint:e=>e,isStatic:false,reducedMotion:"never"});var Ie=typeof window!="undefined";var Ne=Ie?useLayoutEffect:useEffect;var S=e=>e;var W=S,ge=S;process.env.NODE_ENV!=="production"&&(W=(e,t)=>{!e&&typeof console!="undefined"&&console.warn(t);},ge=(e,t)=>{if(!e)throw new Error(t)});var H={useManualTiming:false};var D=["read","resolveKeyframes","update","preRender","render","postRender"];function Be(e,t){let r=new Set,o=new Set,n=false,s=false,i=new WeakSet,a={delta:0,timestamp:0,isProcessing:false};function m(l){i.has(l)&&(c.schedule(l),e()),l(a);}let c={schedule:(l,d=false,v=false)=>{let g=v&&n?r:o;return d&&i.add(l),g.has(l)||g.add(l),l},cancel:l=>{o.delete(l),i.delete(l);},process:l=>{if(a=l,n){s=true;return}n=true,[r,o]=[o,r],r.forEach(m),r.clear(),n=false,s&&(s=false,c.process(l));}};return c}var Ut=40;function ke(e,t){let r=false,o=true,n={delta:0,timestamp:0,isProcessing:false},s=()=>r=true,i=D.reduce((p,h)=>(p[h]=Be(s),p),{}),{read:a,resolveKeyframes:f,update:m,preRender:c,render:l,postRender:d}=i,v=()=>{let p=performance.now();r=false,(n.delta=o?1e3/60:Math.max(Math.min(p-n.timestamp,Ut),1)),n.timestamp=p,n.isProcessing=true,a.process(n),f.process(n),m.process(n),c.process(n),l.process(n),d.process(n),n.isProcessing=false,r&&t&&(o=false,e(v));},u=()=>{r=true,o=true,n.isProcessing||e(v);};return {schedule:D.reduce((p,h)=>{let b=i[h];return p[h]=(z,T=false,X=false)=>(r||u(),b.schedule(z,T,X)),p},{}),cancel:p=>{for(let h=0;h<D.length;h++)i[D[h]].cancel(p);},state:n,steps:i}}var{schedule:w,cancel:V,state:$}=ke(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:S,true);var He=new Set;function Q(e,t,r){e||He.has(t)||(console.warn(t),He.add(t));}var _t=e=>t=>typeof t=="string"&&t.startsWith(e);var Gt=_t("var(--"),De=e=>Gt(e)?qt.test(e.split("/*")[0].trim()):false,qt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;var A=(e,t,r)=>r>t?t:r<e?e:r;var ee={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},te=C(x({},ee),{transform:e=>A(0,1,e)});C(x({},ee),{default:1});var Kt=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`});var I=Kt("%");C(x({},I),{parse:e=>I.parse(e)/100,transform:e=>I.transform(e*100)});var re;function Yt(){re=void 0;}var U={now:()=>(re===void 0&&U.set($.isProcessing||H.useManualTiming?$.timestamp:performance.now()),re),set:e=>{re=e,queueMicrotask(Yt);}};function $e(e,t){e.indexOf(t)===-1&&e.push(t);}function Ue(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1);}var oe=class{constructor(){this.subscriptions=[];}add(t){return $e(this.subscriptions,t),()=>Ue(this.subscriptions,t)}notify(t,r,o){let n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,o);else for(let s=0;s<n;s++){let i=this.subscriptions[s];i&&i(t,r,o);}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0;}};function ne(e,t){return t?e*(1e3/t):0}var _e=30,jt=e=>!isNaN(parseFloat(e)),ve=class{constructor(t,r={}){this.version="12.4.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,n=true)=>{let s=U.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current);},this.hasAnimated=false,this.setCurrent(t),this.owner=r.owner;}setCurrent(t){this.current=t,this.updatedAt=U.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jt(this.current));}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt;}onChange(t){return process.env.NODE_ENV!=="production"&&Q(false,'value.onChange(callback) is deprecated. Switch to value.on("change", callback).'),this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new oe);let o=this.events[t].add(r);return t==="change"?()=>{o(),w.read(()=>{this.events.change.getSize()||this.stop();});}:o}clearListeners(){for(let t in this.events)this.events[t].clear();}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r;}set(t,r=true){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify);}setWithVelocity(t,r,o){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o;}jump(t,r=true){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect();}get(){return this.current}getPrevious(){return this.prev}getVelocity(){let t=U.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_e)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,_e);return ne(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=true,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify();}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation();})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation();}isAnimating(){return !!this.animation}clearAnimation(){delete this.animation;}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect();}};function _(e,t){return new ve(e,t)}function qe(e){let t;return ()=>(t===void 0&&(t=e()),t)}var Ke=qe(()=>window.ScrollTimeline!==void 0);var N=(e,t,r)=>{let o=t-e;return o===0?1:(r-e)/o};var O=e=>Math.round(e*1e5)/1e5;var se=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ye(e){return e==null}var je=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;var B=(e,t)=>r=>!!(typeof r=="string"&&je.test(r)&&r.startsWith(e)||t&&!Ye(r)&&Object.prototype.hasOwnProperty.call(r,t)),ie=(e,t,r)=>o=>{if(typeof o!="string")return o;let[n,s,i,a]=o.match(se);return {[e]:parseFloat(n),[t]:parseFloat(s),[r]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}};var Xt=e=>A(0,255,e),ye=C(x({},ee),{transform:e=>Math.round(Xt(e))}),E={test:B("rgb","red"),parse:ie("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:o=1})=>"rgba("+ye.transform(e)+", "+ye.transform(t)+", "+ye.transform(r)+", "+O(te.transform(o))+")"};function Zt(e){let t="",r="",o="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),o=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),o=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,o+=o,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:n?parseInt(n,16)/255:1}}var G={test:B("#"),parse:Zt,transform:E.transform};var M={test:B("hsl","hue"),parse:ie("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:o=1})=>"hsla("+Math.round(e)+", "+I.transform(O(t))+", "+I.transform(O(r))+", "+O(te.transform(o))+")"};var F={test:e=>E.test(e)||G.test(e)||M.test(e),parse:e=>E.test(e)?E.parse(e):M.test(e)?M.parse(e):G.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?E.transform(e):M.transform(e)};var Xe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jt(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(se))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Xe))===null||r===void 0?void 0:r.length)||0)>0}var Je="number",Qe="color",Qt="var",er="var(",Ze="${}",tr=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function q(e){let t=e.toString(),r=[],o={color:[],number:[],var:[]},n=[],s=0,a=t.replace(tr,f=>(F.test(f)?(o.color.push(s),n.push(Qe),r.push(F.parse(f))):f.startsWith(er)?(o.var.push(s),n.push(Qt),r.push(f)):(o.number.push(s),n.push(Je),r.push(parseFloat(f))),++s,Ze)).split(Ze);return {values:r,split:a,indexes:o,types:n}}function et(e){return q(e).values}function tt(e){let{split:t,types:r}=q(e),o=t.length;return n=>{let s="";for(let i=0;i<o;i++)if(s+=t[i],n[i]!==void 0){let a=r[i];a===Je?s+=O(n[i]):a===Qe?s+=F.transform(n[i]):s+=n[i];}return s}}var rr=e=>typeof e=="number"?0:e;function or(e){let t=et(e);return tt(e)(t.map(rr))}var rt={test:Jt,parse:et,createTransformer:tt,getAnimatableNone:or};var R=(e,t,r)=>e+(t-e)*r;function be(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function ot({hue:e,saturation:t,lightness:r,alpha:o}){e/=360,t/=100,r/=100;let n=0,s=0,i=0;if(!t)n=s=i=r;else {let a=r<.5?r*(1+t):r+t-r*t,f=2*r-a;n=be(f,a,e+1/3),s=be(f,a,e),i=be(f,a,e-1/3);}return {red:Math.round(n*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:o}}function k(e,t){return r=>r>0?t:e}var we=(e,t,r)=>{let o=e*e,n=r*(t*t-o)+o;return n<0?0:Math.sqrt(n)},nr=[G,E,M],sr=e=>nr.find(t=>t.test(e));function nt(e){let t=sr(e);if(W(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return  false;let r=t.parse(e);return t===M&&(r=ot(r)),r}var Ee=(e,t)=>{let r=nt(e),o=nt(t);if(!r||!o)return k(e,t);let n=x({},r);return s=>(n.red=we(r.red,o.red,s),n.green=we(r.green,o.green,s),n.blue=we(r.blue,o.blue,s),n.alpha=R(r.alpha,o.alpha,s),E.transform(n))};var ir=(e,t)=>r=>t(e(r)),ae=(...e)=>e.reduce(ir);var fe=new Set(["none","hidden"]);function st(e,t){return fe.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function ar(e,t){return r=>R(e,t,r)}function le(e){return typeof e=="number"?ar:typeof e=="string"?De(e)?k:F.test(e)?Ee:cr:Array.isArray(e)?it:typeof e=="object"?F.test(e)?Ee:fr:k}function it(e,t){let r=[...e],o=r.length,n=e.map((s,i)=>le(s)(s,t[i]));return s=>{for(let i=0;i<o;i++)r[i]=n[i](s);return r}}function fr(e,t){let r=x(x({},e),t),o={};for(let n in r)e[n]!==void 0&&t[n]!==void 0&&(o[n]=le(e[n])(e[n],t[n]));return n=>{for(let s in o)r[s]=o[s](n);return r}}function lr(e,t){var r;let o=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let i=t.types[s],a=e.indexes[i][n[i]],f=(r=e.values[a])!==null&&r!==void 0?r:0;o[s]=f,n[i]++;}return o}var cr=(e,t)=>{let r=rt.createTransformer(t),o=q(e),n=q(t);return o.indexes.var.length===n.indexes.var.length&&o.indexes.color.length===n.indexes.color.length&&o.indexes.number.length>=n.indexes.number.length?fe.has(e)&&!n.values.length||fe.has(t)&&!o.values.length?st(e,t):ae(it(lr(o,n),n.values),r):(W(true,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),k(e,t))};function at(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?R(e,t,r):le(e)(e,t)}function mr(e,t,r){let o=[],n=r||at,s=e.length-1;for(let i=0;i<s;i++){let a=n(e[i],e[i+1]);if(t){let f=Array.isArray(t)?t[i]||S:t;a=ae(f,a);}o.push(a);}return o}function ft(e,t,{clamp:r=true,ease:o,mixer:n}={}){let s=e.length;if(ge(s===t.length,"Both input and output ranges must be the same length"),s===1)return ()=>t[0];if(s===2&&t[0]===t[1])return ()=>t[1];let i=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let a=mr(t,o,n),f=a.length,m=c=>{if(i&&c<e[0])return t[0];let l=0;if(f>1)for(;l<e.length-2&&!(c<e[l+1]);l++);let d=N(e[l],e[l+1],c);return a[l](d)};return r?c=>m(A(e[0],e[s-1],c)):m}function lt(e,t){let r=e[e.length-1];for(let o=1;o<=t;o++){let n=N(0,t,o);e.push(R(r,1,n));}}function ct(e){let t=[0];return lt(t,e.length-1),t}function mt(e,t,r){var o;if(e instanceof Element)return [e];if(typeof e=="string"){let n=document;let s=(o=void 0)!==null&&o!==void 0?o:n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function Ce(e,t){let r,o=()=>{let{currentTime:n}=t,i=(n===null?0:n.value)/100;r!==i&&e(i),r=i;};return w.update(o,true),()=>V(o)}var ce=new WeakMap,P;function pr(e,t){if(t){let{inlineSize:r,blockSize:o}=t[0];return {width:r,height:o}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function ur({target:e,contentRect:t,borderBoxSize:r}){var o;(o=ce.get(e))===null||o===void 0||o.forEach(n=>{n({target:e,contentSize:t,get size(){return pr(e,r)}});});}function dr(e){e.forEach(ur);}function hr(){typeof ResizeObserver!="undefined"&&(P=new ResizeObserver(dr));}function pt(e,t){P||hr();let r=mt(e);return r.forEach(o=>{let n=ce.get(o);n||(n=new Set,ce.set(o,n)),n.add(t),P==null||P.observe(o);}),()=>{r.forEach(o=>{let n=ce.get(o);n==null||n.delete(t),n!=null&&n.size||P==null||P.unobserve(o);});}}var me=new Set,K;function gr(){K=()=>{let e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};me.forEach(r=>r(t));},window.addEventListener("resize",K);}function ut(e){return me.add(e),K||gr(),()=>{me.delete(e),!me.size&&K&&(K=void 0);}}function dt(e,t){return typeof e=="function"?ut(e):pt(e,t)}var xr=50,ht=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),xt=()=>({time:0,x:ht(),y:ht()}),vr={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function gt(e,t,r,o){let n=r[t],{length:s,position:i}=vr[t],a=n.current,f=r.time;n.current=e[`scroll${i}`],n.scrollLength=e[`scroll${s}`]-e[`client${s}`],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=N(0,n.scrollLength,n.current);let m=o-f;n.velocity=m>xr?0:ne(n.current-a,m);}function vt(e,t,r){gt(e,"x",t,r),gt(e,"y",t,r),t.time=r;}function yt(e,t){let r={x:0,y:0},o=e;for(;o&&o!==t;)if(o instanceof HTMLElement)r.x+=o.offsetLeft,r.y+=o.offsetTop,o=o.offsetParent;else if(o.tagName==="svg"){let n=o.getBoundingClientRect();o=o.parentElement;let s=o.getBoundingClientRect();r.x+=n.left-s.left,r.y+=n.top-s.top;}else if(o instanceof SVGGraphicsElement){let{x:n,y:s}=o.getBBox();r.x+=n,r.y+=s;let i=null,a=o.parentNode;for(;!i;)a.tagName==="svg"&&(i=a),a=o.parentNode;o=i;}else break;return r}var pe={start:0,center:.5,end:1};function Se(e,t,r=0){let o=0;if(e in pe&&(e=pe[e]),typeof e=="string"){let n=parseFloat(e);e.endsWith("px")?o=n:e.endsWith("%")?e=n/100:e.endsWith("vw")?o=n/100*document.documentElement.clientWidth:e.endsWith("vh")?o=n/100*document.documentElement.clientHeight:e=n;}return typeof e=="number"&&(o=t*e),r+o}var yr=[0,0];function bt(e,t,r,o){let n=Array.isArray(e)?e:yr,s=0,i=0;return typeof e=="number"?n=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?n=e.split(" "):n=[e,pe[e]?e:"0"]),s=Se(n[0],r,o),i=Se(n[1],t),s-i}var wt={All:[[0,0],[1,1]]};var br={x:0,y:0};function wr(e){return "getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Et(e,t,r){let{offset:o=wt.All}=r,{target:n=e,axis:s="y"}=r,i=s==="y"?"height":"width",a=n!==e?yt(n,e):br,f=n===e?{width:e.scrollWidth,height:e.scrollHeight}:wr(n),m={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let c=!t[s].interpolate,l=o.length;for(let d=0;d<l;d++){let v=bt(o[d],m[i],f[i],a[s]);!c&&v!==t[s].interpolatorOffsets[d]&&(c=true),t[s].offset[d]=v;}c&&(t[s].interpolate=ft(t[s].offset,ct(o),{clamp:false}),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=A(0,1,t[s].interpolate(t[s].current));}function Er(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let o=t;for(;o&&o!==e;)r.x.targetOffset+=o.offsetLeft,r.y.targetOffset+=o.offsetTop,o=o.offsetParent;}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight,process.env.NODE_ENV!=="production"&&e&&t&&t!==e&&Q(getComputedStyle(e).position!=="static","Please ensure that the container has a non-static position, like 'relative', 'fixed', or 'absolute' to ensure scroll offset is calculated correctly.");}function Ct(e,t,r,o={}){return {measure:()=>Er(e,o.target,r),update:n=>{vt(e,r,n),(o.offset||o.target)&&Et(e,r,o);},notify:()=>t(r)}}var Y=new WeakMap,St=new WeakMap,Te=new WeakMap,Tt=e=>e===document.documentElement?window:e;function ue(e,o={}){var n=o,{container:t=document.documentElement}=n,r=L(n,["container"]);let s=Te.get(t);s||(s=new Set,Te.set(t,s));let i=xt(),a=Ct(t,e,i,r);if(s.add(a),!Y.has(t)){let m=()=>{for(let u of s)u.measure();},c=()=>{for(let u of s)u.update($.timestamp);},l=()=>{for(let u of s)u.notify();},d=()=>{w.read(m,false,true),w.read(c,false,true),w.update(l,false,true);};Y.set(t,d);let v=Tt(t);window.addEventListener("resize",d,{passive:true}),t!==document.documentElement&&St.set(t,dt(t,d)),v.addEventListener("scroll",d,{passive:true});}let f=Y.get(t);return w.read(f,false,true),()=>{var m;V(f);let c=Te.get(t);if(!c||(c.delete(a),c.size))return;let l=Y.get(t);Y.delete(t),l&&(Tt(t).removeEventListener("scroll",l),(m=St.get(t))===null||m===void 0||m(),window.removeEventListener("resize",l));}}function Cr({source:e,container:t,axis:r="y"}){e&&(t=e);let o={value:0},n=ue(s=>{o.value=s[r].progress*100;},{container:t,axis:r});return {currentTime:o,cancel:n}}var Ae=new Map;function At({source:e,container:t=document.documentElement,axis:r="y"}={}){e&&(t=e),Ae.has(t)||Ae.set(t,{});let o=Ae.get(t);return o[r]||(o[r]=Ke()?new ScrollTimeline({source:t,axis:r}):Cr({source:t,axis:r})),o[r]}function Sr(e){return e.length===2}function Ot(e){return e&&(e.target||e.offset)}function Tr(e,t){return Sr(e)||Ot(t)?ue(r=>{e(r[t.axis].progress,r);},t):Ce(e,At(t))}function Ar(e,t){if(e.flatten(),Ot(t))return e.pause(),ue(r=>{e.time=e.duration*r[t.axis].progress;},t);{let r=At(t);return e.attachTimeline?e.attachTimeline(r,o=>(o.pause(),Ce(n=>{o.time=o.duration*n;},r))):S}}function Mt(e,o={}){var n=o,{axis:t="y"}=n,r=L(n,["axis"]);let s=x({axis:t},r);return typeof e=="function"?Tr(e,s):Ar(e,s)}function Rt(e,t){W(!!(!t||t.current),`You have defined a ${e} options but the provided ref is not yet hydrated, probably because it's defined higher up the tree. Try calling useScroll() in the same component as the ref, or setting its \`layoutEffect: false\` option.`);}var Mr=()=>({scrollX:_(0),scrollY:_(0),scrollXProgress:_(0),scrollYProgress:_(0)});function Oe(n={}){var s=n,{container:e,target:t,layoutEffect:r=true}=s,o=L(s,["container","target","layoutEffect"]);let i=Le(Mr);return (r?Ne:useEffect)(()=>(Rt("target",t),Rt("container",e),Mt((f,{x:m,y:c})=>{i.scrollX.set(m.current),i.scrollXProgress.set(m.progress),i.scrollY.set(c.current),i.scrollYProgress.set(c.progress);},C(x({},o),{container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}))),[e,t,JSON.stringify(o.offset)]),i}function Me(e){let t=useRef(0),{isStatic:r}=useContext(Ve);useEffect(()=>{if(r)return;let o=({timestamp:n,delta:s})=>{t.current||(t.current=n),e(n-t.current,s);};return w.update(o,true),()=>V(o)},[e]);}var Fr={forceOverlay:false,featheredFill:"#fff",strokeStyle:"#fff",fill:"rgba(0,0,0,0.1)",configs:[{right:[.2,.9,-0.8],left:[.7,.6,.9]},{right:[.2,.9,-0.5],left:[.7,.6,.6]},{right:[.2,.9,-0.2],left:[.7,.6,.3]}],scrollOffset:["start 80%","end 90%"]};function de(e,t,r){return [lerp(e[0],t[0],r),lerp(e[1],t[1],r),lerp(e[2],t[2],r)]}function Lr(e,t,r){return {left:de(e.left,t.left,r),right:de(e.right,t.right,r)}}function Vr(e,t,r=1,o=1,n=0,s=0,i,a){e.beginPath(),e.moveTo(0,0),e.lineTo(i,0),e.lineTo(i,a*t.right[0]),e.bezierCurveTo(i-t.right[1]*i,t.right[0]*a+t.right[2]*r*a,t.left[1]*i,t.left[0]*a+t.left[2]*r*a,0,t.left[0]*a),e.closePath(),e.fill();for(let f=0;f<o;f++){let m=f+1;e.beginPath(),e.moveTo(i,a*t.right[0]+s*m),e.bezierCurveTo(i-t.right[1]*i,t.right[0]*a+t.right[2]*r*a+s*m,t.left[1]*i,t.left[0]*a+t.left[2]*r*a+n*m,0,t.left[0]*a+n*m),e.stroke();}}function Wt({waveConfig:e=Fr}){let t=useRef(null),r=useRef(null),o=useRef(null),n=u=>u,{scrollYProgress:s}=Oe({target:t,offset:e.scrollOffset}),[i,a]=useState(1),[f,m]=useState(e.configs[0]),c=useRef(null),l=20,d=useRef(s.get());useEffect(()=>{a(window.devicePixelRatio||1);},[]),useEffect(()=>{let u=()=>{let g=r.current,y=o.current,p=t.current;if(!g||!p)return;let h=p.clientWidth,b=p.clientHeight;g.style.width=`${h}px`,g.style.height=`${b}px`,g.width=h*i,g.height=b*i,y&&e.forceOverlay&&(y.style.width=`${h}px`,y.style.height=`${b}px`,y.width=h*i,y.height=b*i);};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[i,e.forceOverlay]);let v=(u,g,y)=>{var h,b,z,T;if(!u)return;let p=u.getContext("2d");p&&(p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,u.width,u.height),p.scale(i,i),p.fillStyle=y,p.strokeStyle=(h=e.strokeStyle)!=null?h:"white",p.lineWidth=.4,Vr(p,g,1,(b=e.curveAmount)!=null?b:1,(z=e.offsetLeft)!=null?z:0,(T=e.offsetRight)!=null?T:0,u.width/i,u.height/i));};return Me(u=>{var X;let g=s.get(),y=e.configs.length,p=y===1?e.configs[0]:(()=>{let he=1/(y-1),Z=Math.min(Math.floor(g/he),y-2),Ft=remap(Z*he,(Z+1)*he,0,1,g),Lt=e.configs[Z],Vt=e.configs[Z+1];return Lr(Lt,Vt,Ft)})();c.current||(c.current=u);let h=u-c.current,b=Math.min(h/l,1),z=n(b),T={left:de(f.left,p.left,z),right:de(f.right,p.right,z)};m(T),g!==d.current&&(c.current=u,d.current=g),e.forceOverlay&&v(o.current,T,(X=e.fill)!=null?X:"#242e2b"),v(r.current,T,e.featheredFill);}),jsxs("div",{className:"absolute inset-0",ref:t,children:[e.forceOverlay&&jsx("canvas",{ref:o,className:"size-full"}),jsx("div",{className:"absolute inset-0",style:{mask:"linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 100) 40%)"},children:jsx("canvas",{ref:r,className:"size-full"})})]})}export{Wt as Wave};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map